<div class="restaurant-card">
    <h2>{{ restaurant.nama }}</h2>
    <img src="{{ restaurant.image.url }}" alt="{{ restaurant.nama }}" class="restaurant-image">
    <p class="restaurant-address">{{ restaurant.alamat }}</p>

    <!-- Dropdown for Reviews -->
    <div class="reviews-dropdown">
      <button onclick="toggleReviews('{{ restaurant.pk }}')">View Reviews</button>
      <div id="reviews-{{ restaurant.pk }}" class="reviews-content" style="display: none;">
        
        <!-- User's Review at the Top -->
        {% if user.is_authenticated %}
          {% if restaurant.user_review %}
            <p>Your Review: {{ restaurant.user_review.comment }} - {{ restaurant.user_review.date }}</p>
            <button onclick="editReview('{{ restaurant.user_review.id }}')">Edit</button>
            <button onclick="deleteReview('{{ restaurant.user_review.id }}')">Delete</button>
          {% else %}
            <button onclick="addReview('{{ restaurant.pk }}')">Add Review</button>
          {% endif %}
        {% endif %}
        
        <!-- Latest Two Reviews -->
        {% for review in restaurant.reviews|slice:":2" %}
          <p>{{ review.comment }} - {{ review.date }}</p>
        {% endfor %}
      </div>
    </div>
</div>

<script>
function toggleReviews(id) {
  const reviews = document.getElementById('reviews-' + id);
  reviews.style.display = reviews.style.display === 'none' ? 'block' : 'none';
}
</script>
